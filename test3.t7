siod equ 02h
sios equ 03h
 ld sp,#0dch
loop call getch
  call putch
  cmp g0,#20h
  jz put
  push g0
  jmp loop
put cmp sp,#0dch
 jz end
 pop g0
 call putch
 jmp put
end halt
getch push g1
wait in g1,sios
 and g1,#40h
 jz wait
 in g0,siod
 pop g1
 ret
putch push g1
wait2 in g1,sios
 and g1,#80h
 jz wait2
 out g0,siod
 pop g1
 ret
