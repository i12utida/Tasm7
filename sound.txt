SPK	EQU	01H
SIO_DAT	EQU	02H
SIO_STA	EQU	70 - 2 -SIO_DAT

; 電子オルゴール
	ORG	70H
START	LD	SP,#0E0H
	LD	G1,#TABLE-1
L9	ADD	G1,#1
	LD	G2,0,G1
	CMP	G2,#0
	JZ	L15
	ADD	G1,#1		; ステート
L10	PUSH	G2		; 6
	LD	G2,0,G1		; 7
L11	SUB	G2,#1		; 5
	NO			; 3
	NO			; 3
	JZ	L12		; 4
	JMP	L11		; 5
L12	LD	G2,#0FFH	; 5
	OUT	G2,SPK		; 7
	LD	G2,0,G1		; 7
L13	SUB	G2,#1		; 5
	NO			; 3
	JZ	L14		; 4
	JMP	L13		; 5
L14	OUT	G2,SPK		; 7
	POP	G2		; 6
	SUB	G2,#1		; 5
	JZ	L9		; 4
	JMP	L10		; 5
L15	JMP	START
;L15	HALT

; ドレミの歌
	
TABLE	DC	0C5H,0E8H
	DC	049H,0D1H
	DC	0F7H,0BAH
	DC	041H,0E8H
	DC	0A5H,0BAH
	DC	083H,0E8H
	DC	0A5H,0BAH
	DC	0A5H,0BAH
	DC	0DCH,0D1H
	DC	052H,0BAH
	DC	057H,0AFH
	DC	057H,0AFH
	DC	052H,0BAH
	DC	049H,0D1H
	DC	0AFH,0AFH
	DC	0AFH,0AFH
	DC	0AFH,0AFH
	DC	0AFH,0AFH
	DC	0F7H,0BAH
	DC	057H,0AFH
	DC	0C4H,09CH
	DC	062H,09CH
	DC	052H,0BAH
	DC	0C4H,09CH
	DC	0A5H,0BAH
	DC	0C4H,09CH
	DC	0C4H,09CH
	DC	000H		; 終了
    DS 8
